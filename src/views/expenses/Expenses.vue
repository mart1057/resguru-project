<template>
    <div class="p-[20px] pt-[20px]">
        <div class="h-[auto] bg-[white] rounded-[12px] pt-[8px] pb-[8px] pl-[28px] pr-[28px] flex flex-col justify-end">
            <div class="flex justify-between">
                <div class="flex">
                    <div><svg width="41" height="41" viewBox="0 0 41 41" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <mask id="mask0_633_15105" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0"
                                width="41" height="41">
                                <rect width="41" height="41" fill="#D9D9D9" />
                            </mask>
                            <g mask="url(#mask0_633_15105)">
                                <path
                                    d="M12.5838 28.6138H15.1463V20.4993H12.5838V28.6138ZM25.8562 28.6138H28.4187V11.9576H25.8562V28.6138ZM19.2201 28.6138H21.7825V23.916H19.2201V28.6138ZM19.2201 20.4993H21.7825V17.0826H19.2201V20.4993ZM9.06862 35.0201C8.20569 35.0201 7.47526 34.7211 6.87734 34.1232C6.27943 33.5253 5.98047 32.7949 5.98047 31.9319V9.06667C5.98047 8.20373 6.27943 7.47331 6.87734 6.87539C7.47526 6.27747 8.20569 5.97852 9.06862 5.97852H31.9339C32.7968 5.97852 33.5273 6.27747 34.1252 6.87539C34.7231 7.47331 35.0221 8.20373 35.0221 9.06667V31.9319C35.0221 32.7949 34.7231 33.5253 34.1252 34.1232C33.5273 34.7211 32.7968 35.0201 31.9339 35.0201H9.06862ZM9.06862 32.4576H31.9339C32.0653 32.4576 32.1858 32.4029 32.2953 32.2934C32.4048 32.1838 32.4596 32.0634 32.4596 31.9319V9.06667C32.4596 8.93524 32.4048 8.81476 32.2953 8.70523C32.1858 8.59573 32.0653 8.54097 31.9339 8.54097H9.06862C8.9372 8.54097 8.81671 8.59573 8.70718 8.70523C8.59768 8.81476 8.54293 8.93524 8.54293 9.06667V31.9319C8.54293 32.0634 8.59768 32.1838 8.70718 32.2934C8.81671 32.4029 8.9372 32.4576 9.06862 32.4576Z"
                                    fill="#003765" />
                            </g>
                        </svg>
                    </div>
                    <div class="text-[24px] font-bold flex items-center ml-[8px]">ภาพรวมรายรับ-รายจ่าย</div>
                </div>
                <div class="flex items-center mt-[-10px]">
                    <input v-model="selectedDate" type="month" placeholder="ค้นหาตามหมายเลขห้อง" id="datepicker"
                        @input="filterByDate()"
                        v-bind:class="{ 'h-[36px] pl-[8px] text-[center] pr-[8px] bg-[#003765] flex cursor-pointer text-[white]  justify-center  rounded-[12px] mt-[12px]': true }" />
                </div>
            </div>
        </div>
        <div class="grid grid-cols-2 w-[100%] gap-4 mt-[24px]">
            <div class="bg-[white] h-[246px] rounded-[22px] pl-[24px] pr-[24px] pt-[18px] pb-[18px]">
                <div class=" font-bold text-[18px]">รายรับ</div>
                <div class="grid grid-cols-3 w-[100%] gap-4 mt-[14px]">
                    <div class="flex mt-[4px] w-[70%]">
                        <div class="mt-[8px]">
                            <div class="flex items-center">
                                <div class="w-[12px] h-[12px] bg-[#F5D65E] rounded-[100px] mr-[8px]"></div>
                                <div class="text-[12px] text-[#5C6B79]">รายรับ</div>
                            </div>
                            <!-- <div class="flex items-center mt-[2px]">
                                <div class="w-[12px] h-[12px] bg-[#008EF4] rounded-[100px] mr-[8px]"></div>
                                <div class="text-[12px] text-[#5C6B79]">ค่ามัดจำห้องพัก</div>
                            </div>
                            <div class="flex items-center mt-[2px]">
                                <div class="w-[12px] h-[12px] bg-[#D44769] rounded-[100px] mr-[8px]"></div>
                                <div class="text-[12px] text-[#5C6B79]">ค่าประกันความเสียหาย</div>
                            </div>
                            <div class="flex items-center mt-[2px]">
                                <div class="w-[12px] h-[12px] bg-[#9A77FF] rounded-[100px] mr-[8px]"></div>
                                <div class="text-[12px] text-[#5C6B79]">อื่น ๆ</div>
                            </div> -->
                        </div>
                    </div>
                    <div class="w-[50%]">
                        <div class="w-[300px] flex justify-start items-start ml-[-90px] mt-[-40px]">
                            <apexchart :options="options" :series="data"></apexchart>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 w-[100%] gap-2 content-start mt-[14px]">
                        <!-- <div class="h-[52px] border rounded-[12px] p-[4px]">
                            <div class="flex justify-between">
                                <div class="flex items-center">
                                    <svg width="33" height="33" viewBox="0 0 33 33" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <mask id="mask0_1413_30554" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0"
                                            y="0" width="33" height="33">
                                            <rect width="33" height="33" fill="#D9D9D9" />
                                        </mask>
                                        <g mask="url(#mask0_1413_30554)">
                                            <path
                                                d="M18.9067 17.4778C17.946 17.4778 17.1329 17.1451 16.4675 16.4797C15.802 15.8142 15.4693 15.0011 15.4693 14.0404C15.4693 13.0797 15.802 12.2666 16.4675 11.6011C17.1329 10.9357 17.946 10.6029 18.9067 10.6029C19.8675 10.6029 20.6805 10.9357 21.346 11.6011C22.0115 12.2666 22.3442 13.0797 22.3442 14.0404C22.3442 15.0011 22.0115 15.8142 21.346 16.4797C20.6805 17.1451 19.8675 17.4778 18.9067 17.4778ZM9.83705 21.735C9.15353 21.735 8.56839 21.4917 8.08162 21.0049C7.59487 20.5182 7.35149 19.933 7.35149 19.2495V8.83126C7.35149 8.14774 7.59487 7.5626 8.08162 7.07583C8.56839 6.58908 9.15353 6.3457 9.83705 6.3457H27.9764C28.6599 6.3457 29.2451 6.58908 29.7318 7.07583C30.2186 7.5626 30.4619 8.14774 30.4619 8.83126V19.2495C30.4619 19.933 30.2186 20.5182 29.7318 21.0049C29.2451 21.4917 28.6599 21.735 27.9764 21.735H9.83705ZM11.8995 19.6726H25.914C25.914 18.9869 26.1573 18.4012 26.6441 17.9155C27.1308 17.4299 27.716 17.187 28.3995 17.187V10.8937C27.7138 10.8937 27.1281 10.6503 26.6424 10.1636C26.1568 9.67682 25.914 9.09168 25.914 8.40817H11.8995C11.8995 9.0939 11.6561 9.6796 11.1694 10.1652C10.6826 10.6509 10.0975 10.8937 9.41396 10.8937V17.187C10.0997 17.187 10.6854 17.4304 11.171 17.9172C11.6567 18.4039 11.8995 18.9891 11.8995 19.6726ZM5.02462 26.5475C4.34108 26.5475 3.75594 26.3041 3.26919 25.8174C2.78244 25.3306 2.53906 24.7455 2.53906 24.062V11.4755C2.53906 11.1833 2.63792 10.9384 2.83565 10.7408C3.0334 10.5431 3.27842 10.4443 3.57073 10.4443C3.86305 10.4443 4.10793 10.5431 4.30535 10.7408C4.50278 10.9384 4.60149 11.1833 4.60149 11.4755V24.062C4.60149 24.1677 4.64557 24.2647 4.73373 24.3528C4.82187 24.441 4.91883 24.485 5.02462 24.485H25.3322C25.6244 24.485 25.8693 24.5839 26.0669 24.7817C26.2646 24.9794 26.3634 25.2244 26.3634 25.5167C26.3634 25.809 26.2646 26.0539 26.0669 26.2513C25.8693 26.4488 25.6244 26.5475 25.3322 26.5475H5.02462ZM9.83705 19.6726H9.41396V8.40817H9.83705C9.72246 8.40817 9.6233 8.45004 9.53957 8.53378C9.45583 8.61751 9.41396 8.71667 9.41396 8.83126V19.2495C9.41396 19.3641 9.45583 19.4632 9.53957 19.547C9.6233 19.6307 9.72246 19.6726 9.83705 19.6726Z"
                                                fill="#F5D65E" />
                                        </g>
                                    </svg>
                                </div>
                                <div class="flex flex-col justify-around">
                                    <div class="text-[12px] text-[#B9CCDC]">60%</div>
                                    <div class="text-[#F5D65E] font-bold text-[16px]">{{ data[0] }}</div>
                                </div>
                            </div>
                        </div> -->
                        <!-- <div class="h-[52px] border rounded-[12px] p-[4px]">
                            <div class="flex justify-between">
                                <div class="flex items-center">
                                    <svg width="29" height="21" viewBox="0 0 29 21" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M16.9067 11.4778C15.946 11.4778 15.1329 11.1451 14.4675 10.4797C13.802 9.81421 13.4693 9.00111 13.4693 8.04037C13.4693 7.07966 13.802 6.26658 14.4675 5.60113C15.1329 4.93567 15.946 4.60294 16.9067 4.60294C17.8675 4.60294 18.6805 4.93567 19.346 5.60113C20.0115 6.26658 20.3442 7.07966 20.3442 8.04037C20.3442 9.00111 20.0115 9.81421 19.346 10.4797C18.6805 11.1451 17.8675 11.4778 16.9067 11.4778ZM7.83705 15.735C7.15353 15.735 6.56839 15.4917 6.08162 15.0049C5.59487 14.5182 5.35149 13.933 5.35149 13.2495V2.83126C5.35149 2.14774 5.59487 1.5626 6.08162 1.07583C6.56839 0.589078 7.15353 0.345703 7.83705 0.345703H25.9764C26.6599 0.345703 27.2451 0.589078 27.7318 1.07583C28.2186 1.5626 28.4619 2.14774 28.4619 2.83126V13.2495C28.4619 13.933 28.2186 14.5182 27.7318 15.0049C27.2451 15.4917 26.6599 15.735 25.9764 15.735H7.83705ZM9.89951 13.6726H23.914C23.914 12.9869 24.1573 12.4012 24.6441 11.9155C25.1308 11.4299 25.716 11.187 26.3995 11.187V4.89372C25.7138 4.89372 25.1281 4.65035 24.6424 4.1636C24.1568 3.67682 23.914 3.09168 23.914 2.40817H9.89951C9.89951 3.0939 9.65614 3.6796 9.16939 4.16525C8.68261 4.6509 8.09747 4.89372 7.41396 4.89372V11.187C8.0997 11.187 8.68539 11.4304 9.17104 11.9172C9.65669 12.4039 9.89951 12.9891 9.89951 13.6726ZM3.02462 20.5475C2.34108 20.5475 1.75594 20.3041 1.26919 19.8174C0.782437 19.3306 0.539062 18.7455 0.539062 18.062V5.47548C0.539062 5.1833 0.637925 4.93839 0.83565 4.74075C1.0334 4.5431 1.27842 4.44427 1.57073 4.44427C1.86305 4.44427 2.10793 4.5431 2.30535 4.74075C2.50278 4.93839 2.60149 5.1833 2.60149 5.47548V18.062C2.60149 18.1677 2.64557 18.2647 2.73373 18.3528C2.82187 18.441 2.91883 18.485 3.02462 18.485H23.3322C23.6244 18.485 23.8693 18.5839 24.0669 18.7817C24.2646 18.9794 24.3634 19.2244 24.3634 19.5167C24.3634 19.809 24.2646 20.0539 24.0669 20.2513C23.8693 20.4488 23.6244 20.5475 23.3322 20.5475H3.02462ZM7.83705 13.6726H7.41396V2.40817H7.83705C7.72246 2.40817 7.6233 2.45004 7.53957 2.53378C7.45583 2.61751 7.41396 2.71667 7.41396 2.83126V13.2495C7.41396 13.3641 7.45583 13.4632 7.53957 13.547C7.6233 13.6307 7.72246 13.6726 7.83705 13.6726Z"
                                            fill="#008EF4" />
                                    </svg>
                                </div>
                                <div class="flex flex-col justify-around">
                                    <div class="text-[12px] text-[#B9CCDC]">60%</div>
                                    <div class="text-[#008EF4] font-bold text-[16px]">8,000</div>
                                </div>
                            </div>
                        </div>
                        <div class="h-[52px] border rounded-[12px] p-[4px]">
                            <div class="flex justify-between">
                                <div class="flex items-center">
                                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <mask id="mask0_1413_30560" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0"
                                            y="0" width="32" height="32">
                                            <rect width="32" height="32" fill="#D9D9D9" />
                                        </mask>
                                        <g mask="url(#mask0_1413_30560)">
                                            <path
                                                d="M7.56533 24.6666L6.87047 26.6358C6.836 26.7325 6.77568 26.8131 6.6895 26.8775C6.6033 26.942 6.50236 26.9743 6.3867 26.9743H6.238C6.1058 26.9743 5.99013 26.9243 5.891 26.8243C5.79186 26.7243 5.7423 26.6076 5.7423 26.4743V24.6666C5.07948 24.6666 4.51206 24.4306 4.04006 23.9586C3.56804 23.4866 3.33203 22.9192 3.33203 22.2563V8.41027C3.33203 7.74745 3.56804 7.18003 4.04006 6.70803C4.51206 6.23601 5.07948 6 5.7423 6H26.255C26.9179 6 27.4853 6.23601 27.9573 6.70803C28.4293 7.18003 28.6653 7.74745 28.6653 8.41027V22.2563C28.6653 22.9197 28.4293 23.4875 27.9573 23.9599C27.4853 24.4322 26.9179 24.6684 26.255 24.6684V26.5076C26.255 26.6386 26.21 26.7491 26.12 26.8392C26.0299 26.9292 25.9194 26.9743 25.7884 26.9743H25.6089C25.5063 26.9743 25.4123 26.9457 25.3269 26.8887C25.2414 26.8316 25.1816 26.7541 25.1474 26.6563L24.4782 24.6666H7.56533ZM5.7423 22.6666H26.255C26.3747 22.6666 26.473 22.6282 26.5499 22.5512C26.6269 22.4743 26.6653 22.376 26.6653 22.2563V8.41027C26.6653 8.2906 26.6269 8.1923 26.5499 8.11537C26.473 8.03843 26.3747 7.99997 26.255 7.99997H5.7423C5.62263 7.99997 5.52433 8.03843 5.4474 8.11537C5.37046 8.1923 5.332 8.2906 5.332 8.41027V22.2563C5.332 22.376 5.37046 22.4743 5.4474 22.5512C5.52433 22.6282 5.62263 22.6666 5.7423 22.6666Z"
                                                fill="#D44769" />
                                        </g>
                                    </svg>
                                </div>
                                <div class="flex flex-col justify-around">
                                    <div class="text-[12px] text-[#B9CCDC]">60%</div>
                                    <div class="text-[#D44769] font-bold text-[16px]">8,000</div>
                                </div>
                            </div>
                        </div>
                        <div class="h-[52px] border rounded-[12px] p-[4px]">
                            <div class="flex justify-between">
                                <div class="flex items-center">
                                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <mask id="mask0_1413_30563" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0"
                                            y="0" width="32" height="32">
                                            <rect width="32" height="32" fill="#D9D9D9" />
                                        </mask>
                                        <g mask="url(#mask0_1413_30563)">
                                            <path
                                                d="M5.15228 27.4368C4.60699 27.4368 4.13734 27.2398 3.74334 26.8458C3.34934 26.4518 3.15234 25.9821 3.15234 25.4368V6.10348C3.15234 5.55819 3.34934 5.08854 3.74334 4.69452C4.13734 4.30052 4.60699 4.10352 5.15228 4.10352H13.819C14.3643 4.10352 14.8339 4.30052 15.2279 4.69452C15.6219 5.08854 15.8189 5.55819 15.8189 6.10348V9.43685H26.8446C27.3899 9.43685 27.8595 9.63385 28.2535 10.0278C28.6476 10.4219 28.8446 10.8915 28.8446 11.4368V25.4368C28.8446 25.9821 28.6476 26.4518 28.2535 26.8458C27.8595 27.2398 27.3899 27.4368 26.8446 27.4368H5.15228ZM5.15228 25.4368H8.48564V22.1035H5.15228V25.4368ZM5.15228 20.1035H8.48564V16.7701H5.15228V20.1035ZM5.15228 14.7702H8.48564V11.4368H5.15228V14.7702ZM5.15228 9.43685H8.48564V6.10348H5.15228V9.43685ZM10.4856 25.4368H13.819V22.1035H10.4856V25.4368ZM10.4856 20.1035H13.819V16.7701H10.4856V20.1035ZM10.4856 14.7702H13.819V11.4368H10.4856V14.7702ZM10.4856 9.43685H13.819V6.10348H10.4856V9.43685ZM15.8189 25.4368H26.8446V11.4368H15.8189V14.7702H18.742V16.7701H15.8189V20.1035H18.742V22.1035H15.8189V25.4368ZM21.6651 16.7701V14.7702H23.6651V16.7701H21.6651ZM21.6651 22.1035V20.1035H23.6651V22.1035H21.6651Z"
                                                fill="#9A77FF" />
                                        </g>
                                    </svg>
                                </div>
                                <div class="flex flex-col justify-around">
                                    <div class="text-[12px] text-[#B9CCDC]">60%</div>
                                    <div class="text-[#9A77FF] font-bold text-[16px]">8,000</div>
                                </div>
                            </div>
                        </div> -->
                    </div>
                </div>
            </div>
            <div class="bg-[white] h-[246px] rounded-[22px] pl-[24px] pr-[24px] pt-[18px] pb-[18px]">
                <div class=" font-bold text-[18px]">รายจ่าย</div>
                <div class="grid grid-cols-3 w-[100%] gap-4 mt-[14px]">
                    <div class="flex mt-[4px] w-[70%]">
                        <div class="mt-[8px]">
                            <div class="flex items-center">
                                <div class="w-[12px] h-[12px] bg-[#F1B826] rounded-[100px] mr-[8px]"></div>
                                <div class="text-[12px] text-[#5C6B79]">{{ label2[0] }}</div>
                            </div>
                            <div class="flex items-center mt-[2px]">
                                <div class="w-[12px] h-[12px] bg-[#008EF4] rounded-[100px] mr-[8px]"></div>
                                <div class="text-[12px] text-[#5C6B79]">{{ label2[1] }}</div>
                            </div>
                            <div class="flex items-center mt-[2px]">
                                <div class="w-[12px] h-[12px] bg-[#D44769] rounded-[100px] mr-[8px]"></div>
                                <div class="text-[12px] text-[#5C6B79]">{{ label2[2] }}</div>
                            </div>
                            <div class="flex items-center mt-[2px]">
                                <div class="w-[12px] h-[12px] bg-[#9A77FF] rounded-[100px] mr-[8px]"></div>
                                <div class="text-[12px] text-[#5C6B79]">{{ label2[3] }}</div>
                            </div>
                        </div>
                    </div>
                    <div class="w-[50%]">
                        <div class="w-[300px] flex justify-start items-start ml-[-90px] mt-[-40px]">
                            <apexchart :options="options" :series="data2"></apexchart>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 w-[100%] gap-2 content-start">
                        <div class="h-[52px] border rounded-[12px] p-[4px]">
                            <div class="flex justify-between">
                                <div class="flex items-center">
                                    <svg width="36" height="36" viewBox="0 0 36 36" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <mask id="mask0_1373_19047" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0"
                                            y="0" width="36" height="36">
                                            <rect width="36" height="36" fill="#D9D9D9" />
                                        </mask>
                                        <g mask="url(#mask0_1373_19047)">
                                            <path
                                                d="M17.4964 25.65L21.8862 18.2019C21.9271 18.1249 21.9312 18.0456 21.8985 17.9639C21.8658 17.8821 21.8085 17.8412 21.7267 17.8412H18.1516L20.3845 8.72595C20.4172 8.61057 20.4009 8.5024 20.3354 8.40142C20.27 8.30045 20.1882 8.24996 20.09 8.24996H14.3065C14.192 8.24996 14.098 8.29324 14.0243 8.37979C13.9507 8.46634 13.9139 8.57692 13.9139 8.71155V19.7884C13.9139 19.923 13.9507 20.0336 14.0243 20.1201C14.098 20.2067 14.192 20.25 14.3065 20.25H17.4964V25.65ZM23.8639 18.7701L17.1652 30.196C17.0458 30.4017 16.8973 30.5373 16.7198 30.6027C16.5423 30.6681 16.3661 30.6681 16.191 30.6027C16.016 30.5373 15.8708 30.4181 15.7555 30.245C15.6402 30.0719 15.5825 29.8623 15.5825 29.6162V22.4999H14.3065C13.6702 22.4999 13.1267 22.235 12.676 21.7052C12.2253 21.1754 12 20.5364 12 19.7884V8.71155C12 7.96347 12.2253 7.32454 12.676 6.79474C13.1267 6.26491 13.6702 6 14.3065 6H20.4826C21.114 6 21.6269 6.28125 22.0211 6.84375C22.4154 7.40625 22.5315 8.02885 22.3695 8.71155L20.6863 15.5913H22.4285C23.1204 15.5913 23.6321 15.9504 23.9633 16.6687C24.2946 17.3869 24.2614 18.0874 23.8639 18.7701Z"
                                                fill="#F5D65E" />
                                        </g>
                                    </svg>
                                </div>
                                <div class="flex flex-col justify-around">
                                    <div class="text-[12px] text-[#B9CCDC]">60%</div>
                                    <div class="text-[#F5D65E] font-bold text-[16px]">{{ $formatNumber(data2[0]) }}</div>
                                </div>
                            </div>
                        </div>
                        <div class="h-[52px] border rounded-[12px] p-[4px]">
                            <div class="flex justify-between">
                                <div class="flex items-center">
                                    <svg width="36" height="36" viewBox="0 0 36 36" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <mask id="mask0_1373_19060" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0"
                                            y="0" width="36" height="36">
                                            <rect width="36" height="36" fill="#D9D9D9" />
                                        </mask>
                                        <g mask="url(#mask0_1373_19060)">
                                            <path
                                                d="M18 32.2507C15.0234 32.2507 12.4043 31.2118 10.1426 29.1341C7.88086 27.0564 6.75 24.245 6.75 20.7C6.75 18.4697 7.59952 16.044 9.29857 13.4228C10.9976 10.8017 13.5659 7.94805 17.0034 4.86193C17.1447 4.7423 17.3009 4.6498 17.4721 4.58443C17.6432 4.51903 17.8192 4.48633 18 4.48633C18.1807 4.48633 18.3567 4.51903 18.5278 4.58443C18.699 4.6498 18.8552 4.7423 18.9965 4.86193C22.434 7.94805 25.0023 10.8017 26.7014 13.4228C28.4004 16.044 29.2499 18.4697 29.2499 20.7C29.2499 24.245 28.1191 27.0564 25.8573 29.1341C23.5956 31.2118 20.9765 32.2507 18 32.2507ZM18 30.0007C20.5153 30.0007 22.6442 29.1358 24.3865 27.406C26.1288 25.6762 27 23.4411 27 20.7007C27 18.9257 26.2625 16.8944 24.7875 14.6069C23.3125 12.3194 21.05 9.77569 18 6.97569C14.95 9.77569 12.6875 12.3194 11.2125 14.6069C9.73746 16.8944 8.99996 18.9257 8.99996 20.7007C8.99996 23.4411 9.87111 25.6762 11.6134 27.406C13.3557 29.1358 15.4846 30.0007 18 30.0007ZM18.3692 28.2699C18.6307 28.2449 18.8461 28.1471 19.0154 27.9764C19.1846 27.8057 19.2692 27.5999 19.2692 27.3589C19.2692 27.0778 19.177 26.855 18.9925 26.6906C18.8081 26.5262 18.5724 26.4565 18.2855 26.4815C17.2605 26.5565 16.1442 26.256 14.9365 25.58C13.7288 24.9041 12.975 23.7286 12.675 22.0536C12.625 21.7978 12.5177 21.5968 12.3533 21.4507C12.1889 21.3045 11.9932 21.2315 11.7663 21.2315C11.4932 21.2315 11.2658 21.3339 11.0841 21.5387C10.9024 21.7435 10.8442 22.0065 10.9096 22.3276C11.3154 24.5065 12.2961 26.0641 13.8519 27.0007C15.4077 27.9372 16.9134 28.3603 18.3692 28.2699Z"
                                                fill="#008EF4" />
                                        </g>
                                    </svg>
                                </div>
                                <div class="flex flex-col justify-around">
                                    <div class="text-[12px] text-[#B9CCDC]">60%</div>
                                    <div class="text-[#008EF4] text-[16px] font-bold">{{$formatNumber(data2[1])  }}</div>
                                </div>
                            </div>
                        </div>
                        <div class="h-[52px] border rounded-[12px] p-[4px]">
                            <div class="flex justify-between">
                                <div class="flex items-center">
                                    <svg width="36" height="36" viewBox="0 0 36 36" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <mask id="mask0_1373_19078" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0"
                                            y="0" width="36" height="36">
                                            <rect width="36" height="36" fill="#D9D9D9" />
                                        </mask>
                                        <g mask="url(#mask0_1373_19078)">
                                            <path
                                                d="M18 17.539C16.5562 17.539 15.3203 17.0249 14.2922 15.9968C13.2641 14.9687 12.75 13.7328 12.75 12.289C12.75 10.8453 13.2641 9.60935 14.2922 8.58125C15.3203 7.55313 16.5562 7.03906 18 7.03906C19.4437 7.03906 20.6796 7.55313 21.7077 8.58125C22.7359 9.60935 23.2499 10.8453 23.2499 12.289C23.2499 13.7328 22.7359 14.9687 21.7077 15.9968C20.6796 17.0249 19.4437 17.539 18 17.539ZM8.10577 28.962C7.72165 28.962 7.39966 28.8321 7.13981 28.5722C6.87994 28.3124 6.75 27.9904 6.75 27.6062V25.6274C6.75 24.8852 6.94809 24.2031 7.34426 23.5809C7.74041 22.9588 8.27501 22.4794 8.94806 22.1429C10.3711 21.4506 11.8418 20.914 13.3599 20.5333C14.8781 20.1525 16.4257 19.9621 18.0027 19.9621C19.5797 19.9621 21.1264 20.1525 22.6427 20.5333C24.1591 20.914 25.6288 21.4506 27.0519 22.1429C27.7249 22.4794 28.2595 22.9588 28.6557 23.5809C29.0518 24.2031 29.2499 24.8852 29.2499 25.6274V27.6062C29.2499 27.9904 29.12 28.3124 28.8601 28.5722C28.6003 28.8321 28.2783 28.962 27.8941 28.962H8.10577ZM18 15.289C18.825 15.289 19.5312 14.9953 20.1187 14.4078C20.7062 13.8203 21 13.114 21 12.289C21 11.464 20.7062 10.7578 20.1187 10.1703C19.5312 9.58278 18.825 9.28903 18 9.28903C17.175 9.28903 16.4687 9.58278 15.8812 10.1703C15.2937 10.7578 15 11.464 15 12.289C15 13.114 15.2937 13.8203 15.8812 14.4078C16.4687 14.9953 17.175 15.289 18 15.289ZM23.5672 23.1322V26.7121H27V25.6274C27 25.3044 26.9086 25.0159 26.7259 24.7621C26.5432 24.5082 26.3076 24.3044 26.0192 24.1505C25.6307 23.9409 25.2283 23.7524 24.812 23.5851C24.3956 23.4178 23.9807 23.2669 23.5672 23.1322ZM14.6826 22.5467V24.4621H21.3173V22.5467C20.7692 22.4274 20.2175 22.3419 19.6622 22.2899C19.107 22.238 18.5517 22.2121 17.9964 22.2121C17.4411 22.2121 16.887 22.238 16.3341 22.2899C15.7812 22.3419 15.2307 22.4274 14.6826 22.5467ZM8.99996 26.7121H12.4327V23.1322C12.0192 23.2669 11.6043 23.4178 11.188 23.5851C10.7716 23.7524 10.3692 23.9409 9.98074 24.1505C9.69229 24.3044 9.45671 24.5082 9.27401 24.7621C9.09131 25.0159 8.99996 25.3044 8.99996 25.6274V26.7121Z"
                                                fill="#D44769" />
                                        </g>
                                    </svg>
                                </div>
                                <div class="flex flex-col justify-around">
                                    <div class="text-[12px] text-[#B9CCDC]">60%</div>
                                    <div class="text-[#D44769] font-bold text-[16px]">{{ $formatNumber(data2[2] )}}</div>
                                </div>
                            </div>
                        </div>
                        <div class="h-[52px] border rounded-[12px] p-[4px]">
                            <div class="flex justify-between">
                                <div class="flex items-center">
                                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <mask id="mask0_1373_19086" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0"
                                            y="0" width="32" height="32">
                                            <rect width="32" height="32" fill="#D9D9D9" />
                                        </mask>
                                        <g mask="url(#mask0_1373_19086)">
                                            <path
                                                d="M18.3326 16.9491C17.401 16.9491 16.6126 16.6265 15.9673 15.9812C15.322 15.3359 14.9993 14.5474 14.9993 13.6158C14.9993 12.6842 15.322 11.8958 15.9673 11.2505C16.6126 10.6052 17.401 10.2825 18.3326 10.2825C19.2642 10.2825 20.0527 10.6052 20.698 11.2505C21.3433 11.8958 21.6659 12.6842 21.6659 13.6158C21.6659 14.5474 21.3433 15.3359 20.698 15.9812C20.0527 16.6265 19.2642 16.9491 18.3326 16.9491ZM9.53777 21.0773C8.87497 21.0773 8.30756 20.8413 7.83554 20.3693C7.36354 19.8973 7.12754 19.3299 7.12754 18.6671V8.56453C7.12754 7.90173 7.36354 7.33432 7.83554 6.8623C8.30756 6.3903 8.87497 6.1543 9.53777 6.1543H27.1274C27.7903 6.1543 28.3577 6.3903 28.8297 6.8623C29.3017 7.33432 29.5377 7.90173 29.5377 8.56453V18.6671C29.5377 19.3299 29.3017 19.8973 28.8297 20.3693C28.3577 20.8413 27.7903 21.0773 27.1274 21.0773H9.53777ZM11.5377 19.0774H25.1275C25.1275 18.4124 25.3635 17.8445 25.8355 17.3735C26.3075 16.9026 26.8749 16.6671 27.5377 16.6671V10.5645C26.8728 10.5645 26.3048 10.3285 25.8339 9.8565C25.363 9.38447 25.1275 8.81706 25.1275 8.15426H11.5377C11.5377 8.81922 11.3017 9.38716 10.8297 9.8581C10.3577 10.329 9.7903 10.5645 9.1275 10.5645V16.6671C9.79246 16.6671 10.3604 16.9031 10.8313 17.3751C11.3023 17.8471 11.5377 18.4145 11.5377 19.0774ZM4.87117 25.7439C4.20835 25.7439 3.64094 25.5079 3.16894 25.0359C2.69694 24.5639 2.46094 23.9965 2.46094 23.3337V11.1286C2.46094 10.8453 2.5568 10.6078 2.74854 10.4162C2.94029 10.2245 3.17789 10.1287 3.46134 10.1287C3.7448 10.1287 3.98226 10.2245 4.1737 10.4162C4.36515 10.6078 4.46087 10.8453 4.46087 11.1286V23.3337C4.46087 23.4363 4.50362 23.5303 4.5891 23.6158C4.67457 23.7012 4.76859 23.744 4.87117 23.744H24.5633C24.8467 23.744 25.0842 23.8398 25.2758 24.0316C25.4675 24.2233 25.5633 24.4609 25.5633 24.7444C25.5633 25.0278 25.4675 25.2653 25.2758 25.4567C25.0842 25.6482 24.8467 25.7439 24.5633 25.7439H4.87117ZM9.53777 19.0774H9.1275V8.15426H9.53777C9.42666 8.15426 9.3305 8.19486 9.2493 8.27606C9.1681 8.35726 9.1275 8.45342 9.1275 8.56453V18.6671C9.1275 18.7782 9.1681 18.8743 9.2493 18.9555C9.3305 19.0368 9.42666 19.0774 9.53777 19.0774Z"
                                                fill="#CC00FF" />
                                        </g>
                                    </svg>
                                </div>
                                <div class="flex flex-col justify-around">
                                    <div class="text-[12px] text-[#B9CCDC]">60%</div>
                                    <div class="text-[#CC00FF  ] font-bold text-[16px]">{{ $formatNumber(data2[3]) }}</div>
                                </div>
                            </div>
                        </div>
                        <!-- <div class="h-[52px] border rounded-[12px] p-[4px]">
                            <div class="flex justify-between">
                                <div class="flex items-center">
                                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <mask id="mask0_1373_19097" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0"
                                            y="0" width="32" height="32">
                                            <rect width="32" height="32" fill="#D9D9D9" />
                                        </mask>
                                        <g mask="url(#mask0_1373_19097)">
                                            <path
                                                d="M5.15228 27.4368C4.60699 27.4368 4.13734 27.2398 3.74334 26.8458C3.34934 26.4518 3.15234 25.9821 3.15234 25.4368V6.10348C3.15234 5.55819 3.34934 5.08854 3.74334 4.69452C4.13734 4.30052 4.60699 4.10352 5.15228 4.10352H13.819C14.3643 4.10352 14.8339 4.30052 15.2279 4.69452C15.6219 5.08854 15.8189 5.55819 15.8189 6.10348V9.43685H26.8446C27.3899 9.43685 27.8595 9.63385 28.2535 10.0278C28.6476 10.4219 28.8446 10.8915 28.8446 11.4368V25.4368C28.8446 25.9821 28.6476 26.4518 28.2535 26.8458C27.8595 27.2398 27.3899 27.4368 26.8446 27.4368H5.15228ZM5.15228 25.4368H8.48564V22.1035H5.15228V25.4368ZM5.15228 20.1035H8.48564V16.7701H5.15228V20.1035ZM5.15228 14.7702H8.48564V11.4368H5.15228V14.7702ZM5.15228 9.43685H8.48564V6.10348H5.15228V9.43685ZM10.4856 25.4368H13.819V22.1035H10.4856V25.4368ZM10.4856 20.1035H13.819V16.7701H10.4856V20.1035ZM10.4856 14.7702H13.819V11.4368H10.4856V14.7702ZM10.4856 9.43685H13.819V6.10348H10.4856V9.43685ZM15.8189 25.4368H26.8446V11.4368H15.8189V14.7702H18.742V16.7701H15.8189V20.1035H18.742V22.1035H15.8189V25.4368ZM21.6651 16.7701V14.7702H23.6651V16.7701H21.6651ZM21.6651 22.1035V20.1035H23.6651V22.1035H21.6651Z"
                                                fill="#9A77FF" />
                                        </g>
                                    </svg>
                                </div>
                                <div class="flex flex-col justify-around">
                                    <div class="text-[12px] text-[#B9CCDC]">60%</div>
                                    <div class="text-[#9A77FF] font-bold text-[16px]">{{ data2[4] }}</div>
                                </div>
                            </div>
                        </div> -->
                    </div>
                </div>
            </div>
        </div>
        <div
            class="h-[auto] mt-[24px] bg-[white] rounded-[12px] pt-[8px] pb-[8px] pl-[28px] pr-[28px] flex flex-col justify-end">
            <div class="">
                <div class="flex">
                    <div><svg width="41" height="41" viewBox="0 0 41 41" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <mask id="mask0_633_15105" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0"
                                width="41" height="41">
                                <rect width="41" height="41" fill="#D9D9D9" />
                            </mask>
                            <g mask="url(#mask0_633_15105)">
                                <path
                                    d="M12.5838 28.6138H15.1463V20.4993H12.5838V28.6138ZM25.8562 28.6138H28.4187V11.9576H25.8562V28.6138ZM19.2201 28.6138H21.7825V23.916H19.2201V28.6138ZM19.2201 20.4993H21.7825V17.0826H19.2201V20.4993ZM9.06862 35.0201C8.20569 35.0201 7.47526 34.7211 6.87734 34.1232C6.27943 33.5253 5.98047 32.7949 5.98047 31.9319V9.06667C5.98047 8.20373 6.27943 7.47331 6.87734 6.87539C7.47526 6.27747 8.20569 5.97852 9.06862 5.97852H31.9339C32.7968 5.97852 33.5273 6.27747 34.1252 6.87539C34.7231 7.47331 35.0221 8.20373 35.0221 9.06667V31.9319C35.0221 32.7949 34.7231 33.5253 34.1252 34.1232C33.5273 34.7211 32.7968 35.0201 31.9339 35.0201H9.06862ZM9.06862 32.4576H31.9339C32.0653 32.4576 32.1858 32.4029 32.2953 32.2934C32.4048 32.1838 32.4596 32.0634 32.4596 31.9319V9.06667C32.4596 8.93524 32.4048 8.81476 32.2953 8.70523C32.1858 8.59573 32.0653 8.54097 31.9339 8.54097H9.06862C8.9372 8.54097 8.81671 8.59573 8.70718 8.70523C8.59768 8.81476 8.54293 8.93524 8.54293 9.06667V31.9319C8.54293 32.0634 8.59768 32.1838 8.70718 32.2934C8.81671 32.4029 8.9372 32.4576 9.06862 32.4576Z"
                                    fill="#003765" />
                            </g>
                        </svg>
                    </div>
                    <div class="text-[18px] font-bold flex items-center ml-[8px]">รายรับ-รายจ่าย</div>
                </div>
                <div class="flex">


                    <div class="h-[36px] w-[150px] flex cursor-pointer  justify-left rounded-[12px] mt-[12px]">
                        <div @click="tab = 1" class="cursor-pointer "
                            :class="tab == 1 ? 'bg-[#003765] pl-[9px] pr-[9px] pt-[8px] pb-[8px] rounded-[12px] text-[white]' : 'text-[#003765] pl-[9px] pr-[9px] pt-[8px] pb-[8px] flex justify-center items-center'">
                            รายรับ</div>
                        <div @click="tab = 2" class="cursor-pointer ml-[8px]"
                            :class="tab == 2 ? 'bg-[#003765] pl-[9px] pr-[9px] pt-[8px] pb-[8px] rounded-[12px] text-[white]' : 'text-[#003765] pl-[9px] pr-[9px] pt-[8px] pb-[8px] flex justify-center items-center'">
                            รายจ่าย
                        </div>
                    </div>
                    <div class="h-[36px] w-[132px] bg-[#003765] flex cursor-pointer  justify-center rounded-[12px] mt-[12px]"
                        @click="create = true">

                        <div class="flex justify-center items-center">
                            <svg width="14" height="13" viewBox="0 0 14 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M6.99968 12.6875C6.8048 12.6875 6.64155 12.6216 6.50993 12.4898C6.37831 12.3581 6.3125 12.1948 6.3125 12V7.18746H1.49998C1.30519 7.18746 1.14191 7.12155 1.01016 6.98973C0.878385 6.8579 0.8125 6.69455 0.8125 6.49968C0.8125 6.3048 0.878385 6.14155 1.01016 6.00993C1.14191 5.87831 1.30519 5.8125 1.49998 5.8125H6.3125V0.999977C6.3125 0.805185 6.37841 0.641904 6.51023 0.510133C6.64206 0.378378 6.80541 0.3125 7.00028 0.3125C7.19516 0.3125 7.35841 0.378378 7.49003 0.510133C7.62165 0.641904 7.68745 0.805185 7.68745 0.999977V5.8125H12.5C12.6948 5.8125 12.8581 5.87841 12.9898 6.01023C13.1216 6.14206 13.1875 6.30541 13.1875 6.50028C13.1875 6.69516 13.1216 6.85841 12.9898 6.99003C12.8581 7.12164 12.6948 7.18746 12.5 7.18746H7.68745V12C7.68745 12.1948 7.62155 12.3581 7.48973 12.4898C7.3579 12.6216 7.19455 12.6875 6.99968 12.6875Z"
                                    fill="white" />
                            </svg>
                        </div>

                        <div @click="create = true"
                            class="text-white font-bold ml-[8px]   flex justify-center items-center">เพิ่มรายจ่าย</div>

                    </div>

                    <!-- <vs-tooltip bottom shadow not-hover v-model="popup_filter">
                        <div @click="popup_filter = true"
                            class="h-[36px] w-[132px]  flex  justify-center rounded-[12px] mt-[12px] ml-[14px] cursor-pointer">
                            <div class="flex justify-center items-center">
                                <svg width="22" height="23" viewBox="0 0 22 23" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <mask id="mask0_3262_4178" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0"
                                        y="0" width="22" height="23">
                                        <rect y="0.5" width="22" height="22" fill="#D9D9D9" />
                                    </mask>
                                    <g mask="url(#mask0_3262_4178)">
                                        <path
                                            d="M10.0846 16.7707C9.88982 16.7707 9.72655 16.7048 9.59479 16.573C9.46302 16.4411 9.39714 16.2778 9.39714 16.0829C9.39714 15.888 9.46302 15.7248 9.59479 15.5932C9.72655 15.4615 9.88982 15.3957 10.0846 15.3957H11.9179C12.1127 15.3957 12.276 15.4616 12.4078 15.5935C12.5395 15.7253 12.6054 15.8886 12.6054 16.0835C12.6054 16.2784 12.5395 16.4416 12.4078 16.5733C12.276 16.7049 12.1127 16.7707 11.9179 16.7707H10.0846ZM3.66795 7.25144C3.47315 7.25144 3.30988 7.18553 3.17813 7.05369C3.04635 6.92186 2.98047 6.75851 2.98047 6.56364C2.98047 6.36876 3.04635 6.20551 3.17813 6.07389C3.30988 5.94227 3.47315 5.87646 3.66795 5.87646H18.3346C18.5294 5.87646 18.6927 5.94238 18.8245 6.07421C18.9562 6.20603 19.0221 6.36938 19.0221 6.56426C19.0221 6.75913 18.9562 6.92237 18.8245 7.05399C18.6927 7.18563 18.5294 7.25144 18.3346 7.25144H3.66795ZM6.41795 12.0111C6.22315 12.0111 6.05988 11.9451 5.92813 11.8133C5.79635 11.6815 5.73047 11.5181 5.73047 11.3233C5.73047 11.1284 5.79635 10.9651 5.92813 10.8335C6.05988 10.7019 6.22315 10.6361 6.41795 10.6361H15.5846C15.7794 10.6361 15.9427 10.702 16.0745 10.8338C16.2062 10.9657 16.2721 11.129 16.2721 11.3239C16.2721 11.5188 16.2062 11.682 16.0745 11.8136C15.9427 11.9452 15.7794 12.0111 15.5846 12.0111H6.41795Z"
                                            fill="#003765" />
                                    </g>
                                </svg>
                            </div>
                            <div class=" font-bold ml-[8px] flex justify-center items-center">ฟิลเตอร์</div>
                        </div>
                        <template #tooltip>
                            <div class="w-[100%]">
                                <div class="center">
                                    <vs-checkbox v-model="option">
                                        <div class="text-custom">ห้องค้างชำระ</div>
                                    </vs-checkbox>
                                </div>
                                <div class="center">
                                    <vs-checkbox v-model="option">
                                        <div class="text-custom">ห้องชำระเงินแล้ว</div>
                                    </vs-checkbox>
                                </div>
                                <div class="center">
                                    <vs-checkbox v-model="option">
                                        <div class="text-custom">ห้องว่าง</div>
                                    </vs-checkbox>
                                </div>
                                <div class="center">
                                    <vs-checkbox v-model="option">
                                        <div class="text-custom">ห้องติดจอง</div>
                                    </vs-checkbox>
                                </div>
                                <div class="center">
                                    <vs-checkbox v-model="option">
                                        <div class="text-custom">ห้องใกล้หมดสัญญา</div>
                                    </vs-checkbox>
                                </div>
                                <div class="center">
                                    <vs-checkbox v-model="option">
                                        <div class="text-custom">ห้องแจ้งย้ายออก</div>
                                    </vs-checkbox>
                                </div>
                            </div>
                        </template>
                    </vs-tooltip> -->
                </div>
            </div>
            <div class="mt-[14px]" v-if="tab == 2">
                <vs-table>
                    <template #thead>
                        <vs-tr>

                            <vs-th>
                                วันที่
                            </vs-th>
                            <vs-th>
                                ประเภท
                            </vs-th>
                            <vs-th>
                                หัวข้อ
                            </vs-th>
                            <vs-th>
                                หมายเหตุ
                            </vs-th>
                            <vs-th>
                                หลักฐานการชำระเงิน
                            </vs-th>
                            <vs-th>
                                ใบสำคัญจ่าย
                            </vs-th>
                            <vs-th>
                                จำนวนเงิน
                            </vs-th>
                        </vs-tr>
                    </template>
                    <template #tbody>
                        <vs-tr :key="i" v-for="(tr, i) in expense" :data="tr">

                            <vs-td>
                                {{ tr.attributes.date }}
                            </vs-td>
                            <vs-td>
                                {{ tr.attributes.building_expense_type.data ? tr.attributes.building_expense_type.data.attributes.expenseTypeName : "" }}
                            </vs-td>
                            <vs-td>
                                {{ tr.attributes.title }}
                            </vs-td>
                            <vs-td>
                                {{ tr.attributes.remark }}
                            </vs-td>
                            <vs-td>
                                <img :scr="tr.attributes.evidence.data ? 'https://api.resguru.app'+tr.attributes.evidence.data.attributes.url : ''"/>
                            </vs-td>
                            <vs-td>
                                <!-- {{ tr.attributes.receipt.data ? tr.attributes.receipt.data.attributes.url : "" }} -->
                                <img :scr=" tr.attributes.receipt.data ? 'https://api.resguru.app'+ tr.attributes.receipt.data.attributes.url : ''"/>
                            </vs-td>
                            <vs-td>
                                {{ $formatNumber(tr.attributes.amount) }}
                            </vs-td>
                        </vs-tr>
                    </template>
                </vs-table>
            </div>

            <div class="mt-[14px]" v-if="tab == 1">
                <vs-table>
                    <template #thead>
                        <vs-tr>
                            <vs-th>
                                หมายเลขใบเสร็จรับเงิน
                            </vs-th>
                            <vs-th>
                                วันที่ออกใบเสร็จ
                            </vs-th>
                            <vs-th>
                                ห้อง
                            </vs-th>
                            <vs-th>
                                หลักฐานการชำระเงิน
                            </vs-th>
                            <vs-th>
                                ยอดรวมรายรับ
                            </vs-th>
                        </vs-tr>
                    </template>
                    <template #tbody>
                        <vs-tr :key="i" v-for="(tr, i) in income" :data="tr">
                            <vs-td>
                                {{ tr.attributes.receiptNumber }}
                            </vs-td>
                            <vs-td>
                                {{ tr.attributes.createdAt }}
                            </vs-td>
                            <vs-td>
                                Room Number
                            </vs-td>
                            <vs-td>
                                Image.png
                            </vs-td>
                            <vs-td>
                                {{ $formatNumber(tr.attributes.total) }}
                            </vs-td>
                        </vs-tr>
                    </template>
                </vs-table>
            </div>
        </div>

        <!-- //////////////////////////// pop-up /////////////////////// -->
        <b-modal centered v-model="create" size="default" hide-backdrop hide-header-close hide-header hide-footer
            class="p-[-20px] text-custom">
            <div>
                <div class="flex justify-between pl-[20px] pr-[20px]">
                    <div class="text-custom flex justify-center items-center text-[18px] font-bold">เพิ่มรายจ่าย</div>
                    <div @click="create = false" class="cursor-pointer">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <mask id="mask0_417_4814" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0"
                                width="24" height="24">
                                <rect width="24" height="24" fill="#D9D9D9" />
                            </mask>
                            <g mask="url(#mask0_417_4814)">
                                <path
                                    d="M12.0005 13.0538L6.92737 18.1269C6.78892 18.2654 6.61489 18.3362 6.40527 18.3394C6.19567 18.3426 6.01844 18.2718 5.87357 18.1269C5.72869 17.982 5.65625 17.8064 5.65625 17.6C5.65625 17.3936 5.72869 17.218 5.87357 17.0731L10.9466 12L5.87357 6.92689C5.73511 6.78844 5.66427 6.6144 5.66107 6.40479C5.65786 6.19519 5.72869 6.01795 5.87357 5.87309C6.01844 5.7282 6.19407 5.65576 6.40047 5.65576C6.60687 5.65576 6.78251 5.7282 6.92737 5.87309L12.0005 10.9462L17.0736 5.87309C17.212 5.73462 17.3861 5.66379 17.5957 5.66059C17.8053 5.65737 17.9825 5.7282 18.1274 5.87309C18.2723 6.01795 18.3447 6.19359 18.3447 6.39999C18.3447 6.60639 18.2723 6.78202 18.1274 6.92689L13.0543 12L18.1274 17.0731C18.2658 17.2115 18.3367 17.3856 18.3399 17.5952C18.3431 17.8048 18.2723 17.982 18.1274 18.1269C17.9825 18.2718 17.8069 18.3442 17.6005 18.3442C17.3941 18.3442 17.2184 18.2718 17.0736 18.1269L12.0005 13.0538Z"
                                    fill="#5C6B79" />
                            </g>
                        </svg>
                    </div>
                </div>
                <!-- <div class="w-[100%] h-[1px]  mt-[24px] mb-[14px] bg-gray-200 border-0 dark:bg-gray-700"></div> -->
                <div class="pl-[20px] pr-[20px] mt-[24px]">
                    <div>
                        <div class="text-custom text-[14px] text-[#003765]">ประเภทรายจ่าย</div>
                        <div class="flex  items-center">
                            <select placeholder="Select"  class="w-[200px] h-[32px] border rounded-[12px] pl-[8px] pr-[8px]" v-model="expenseTypeValue">
                                <option v-for="expenseType in expenseType"
                                    :value="expenseType.id">
                                    {{ expenseType.attributes.expenseTypeName }}
                                </option>
                            </select>
                            <div class="ml-[8px]">
                                <input class="h-[36px] w-[100%] ml-[8px] bg-[#F3F8FD] rounded-[12px]  flex justify-start"
                                    type="input" v-model="title" />
                            </div>
                        </div>
                    </div>
                    <div class="mt-[8px]">
                        <div class="text-custom text-[14px] text-[#003765]">หมายเหตุ</div>
                        <input class="h-[36px] w-[100%] bg-[#F3F8FD] rounded-[12px]  flex justify-start" type="input"
                            v-model="remark" />
                    </div>
                    <div class="mt-[14px]">
                        <div class="text-custom text-[14px] text-[#003765]">จำนวนเงิน (บาท)</div>
                        <input class="h-[36px] w-[100%] bg-[#F3F8FD] rounded-[12px]  flex justify-start" type="input"
                            v-model="amount" />
                    </div>
                    <div class="mt-[14px]">
                        <div class="text-custom text-[14px] text-[#003765]">วันที่</div>
                        <input class="h-[36px] w-[100%] bg-[#F3F8FD] rounded-[12px] pl-[14px] pr-[14px]  flex justify-start"
                            type="date" v-model="date" />
                    </div>
                    <div class="mt-[14px]">
                        <div class="text-custom text-[14px] text-[#003765]">หลักฐานการจ่ายเงิน</div>
                        <div class="flex mt-[4px]">
                            <input class="h-[28px] w-[120px] rounded-[12px] border flex justify-start " id="uploadEvidence"
                                ref="fileEvidence" hidden type="file" @change="tempUploadEvidence()" />
                            <label for="uploadEvidence">
                            <div
                                class="flex justify-center text-custom items-center bg-[#165D98] text-[14px] cursor-pointer text-[white] pt-[8px] pb-[8px] pl-[12px] pr-[12px] rounded-[12px]">
                                เลือกรูปภาพ</div>
                            </label>
                            <div v-if="this.fileEvidenceForm.name" class="text-[#5C6B79] text-custom flex justify-center items-center ml-[8px] text-[12px]">
                                {{this.fileEvidenceForm.name}}</div>
                            <div v-else class="text-[#5C6B79] text-custom flex justify-center items-center ml-[8px] text-[12px]">
                                ยังไม่ได้เลือกไฟล์</div>
                        </div>
                    </div>
                    <div class="mt-[14px]">
                        <div class="text-custom text-[14px] text-[#003765]">ใบสำคัญจ่าย</div>
                        <div class="flex mt-[4px]">
                            <input class="h-[28px] w-[120px] rounded-[12px] border flex justify-start " id="uploadReceipt"
                                ref="fileReceipt" hidden type="file" @change="tempUploadReceipt()" />
                            <label for="uploadReceipt">
                            <div
                                class="flex justify-center text-custom items-center bg-[#165D98] cursor-pointer text-[14px] text-[white] pt-[8px] pb-[8px] pl-[12px] pr-[12px] rounded-[12px]">
                                เลือกรูปภาพ</div>
                            </label>
                            <div v-if="this.fileReceiptForm.name" class="text-[#5C6B79] text-custom flex justify-center items-center ml-[8px] text-[12px]">
                                {{this.fileReceiptForm.name}}</div>
                            <div v-else class="text-[#5C6B79] text-custom flex justify-center items-center ml-[8px] text-[12px]">
                                ยังไม่ได้เลือกไฟล์</div>
                        </div>
                    </div>

                </div>
                <div class="flex justify-end mt-[30px]">
                    <div>
                        <vs-button dark shadow @click="create = false">
                            <div class="text-custom">ยกเลิก</div>
                        </vs-button>
                    </div>
                    <div>
                        <vs-button @click="createExpense()" color="#003765">
                            <div class="text-custom">เพิ่ม</div>
                        </vs-button>
                    </div>
                </div>
            </div>
        </b-modal>
    </div>
</template>
<script>
import VueApexCharts from "vue-apexcharts";
import axios from 'axios'

export default {
    components: {
        apexchart: VueApexCharts,
    },
    data() {
        return {
            tab: 1,
            create: false,
            popup_filter: false,
            data: [],
            data2: [0, 0, 0, 0],
            label2: [],
            expense: [],
            expenseType: [],
            income: [],
            title: "",
            expenseTypeValue: 0,
            amount: 0,
            date: "",
            remark: "",
            evidence: "",
            receipt: "",
            fileEvidenceForm: [],
            fileReceiptForm: [],
            selectedDate: null,
            filter: {
                search: '',
                floor: '',
                selectedMonth: '',
                selectedYear: '',
            },
        }

    },
    created() {
        this.selectedDate = new Date().toISOString().substr(0, 7) // Set the default to current month
        const loading = this.$vs.loading({
            opacity: 1,
        })
        setTimeout(() => {
            loading.close()
        }, 1000)
    },
    computed: {
        options() {
            return {
                chart: {
                    type: "donut",
                },
                dataLabels: {
                    enabled: false,
                },
                legend: {
                    show: false,
                },
                dashboard: [],

                labels: this.label2,
                plotOptions: {
                    pie: {
                        // data:[10,20,4,6,7],
                        donut: {
                            labels: {
                                show: true,
                                total: {
                                    show: true,
                                    label: "ทั้งหมด",
                                    fontSize: "14px",
                                    fontWeight: "bold",
                                    color: "#6B7490",
                                    fontFamily: "Prompt",
                                },
                            },
                        },
                    },
                },
                colors: ["#F5D65E", "#008EF4", "#D44769", "#9A77FF"]

                // noData: {
                //     text: this.loading ? "Loading..." : "No Data",
                // },
            };
        },
    },
    mounted() {
        this.filterByDate()
        this.getIncome();
        this.getExpenseType();
    },
    methods: {
        filterByDate() {
            const dateStr =  this.selectedDate;
            const [a, b] = dateStr.split('-');
            this.filter.selectedMonth = b
            this.filter.selectedYear = a
            this.getDashboard(this.filter.selectedMonth, this.filter.selectedYear);
            this.getExpense(this.filter.selectedMonth, this.filter.selectedYear)
        },
        routeTo(path) {
            this.$router.push({
                path: path,
            })
        },
        getDashboard(m,y) {
            fetch(`https://api.resguru.app/api/getexpensedashboard?buildingid=${this.$store.state.building}`)
                .then(response => response.json())
                .then((resp) => {
                    console.log("Return from getExpense()", resp.accounting.receive.toFixed(2));
                    const desiredOrder = ["ค่าจ้างพนักงาน", "ค่าจ้างทำของ", "ค่าซ่อมบำรุง", "ค่าอื่นๆ"];
                    const counts = desiredOrder.map(type => {
                        const item = resp.expenseCategory.counts.find(item => item.type === type);
                        return item ? item.count : 0;
                    });
                    this.label2 = desiredOrder
                    this.data2 = counts
                    this.data.push(Math.floor(resp.accounting.receive))
                    this.dashboard = resp
                })
        },
        getExpense(m,y) {
            const loading = this.$vs.loading()
            // fetch('https://api.resguru.app/api' + '/announcements?filters[building][id][$eq]=' + this.$store.state.building +'&poopulate=*')
            fetch(`https://api.resguru.app/api/building-expenses?populate=*&filters[building][id][$eq]=${this.$store.state.building}&sort[0]=id:desc`)
                .then(response => response.json())
                .then((resp) => {
                    console.log("Return from getExpense()", resp.data);
                    this.expense = resp.data
                }).finally(() => {
                    loading.close()
                })
        },
        getExpenseType() {
            fetch(`https://api.resguru.app/api/building-expense-types`)
                .then(response => response.json())
                .then((resp) => {
                    console.log("Return from getExpense()", resp.data);
                    this.expenseType = resp.data
                })
        },
        tempUploadEvidence() {
            this.fileEvidenceForm = this.$refs.fileEvidence.files[0]
        },
        tempUploadReceipt() {
            this.fileReceiptForm = this.$refs.fileReceipt.files[0]
        },
        createExpense() {
            axios.post(`https://api.resguru.app/api/building-expenses`, {
                data: {
                    title: this.title,
                    building_expense_type: this.expenseTypeValue,
                    amount: this.amount,
                    date: this.date,
                    remark: this.remark,
                    building: this.$store.state.building,
                    // evidence: this.evidence,
                    // receipt: this.receipt
                }
            })
                .then((resp) => {

                    if (this.fileEvidenceForm.length != 0) {
                        let formData = new FormData();
                        formData.append("files", this.fileEvidenceForm);
                        formData.append("refId", String(resp.data.data.id));
                        formData.append("ref", "api::building-expense.building-expense");
                        formData.append("field", "evidence");

                        axios.post("https://api.resguru.app/api/upload", formData, {
                            headers: {
                                "Content-Type": "multipart/form-data",
                            },
                        }).then((result) => { console.log("Upload file", result) })
                            .catch((error) => {
                                console.log(error);
                            })
                    }

                    if (this.fileReceiptForm.length != 0) {
                        let formDataReceipt = new FormData();
                        formDataReceipt.append("files", this.fileReceiptForm);
                        formDataReceipt.append("refId", String(resp.data.data.id));
                        formDataReceipt.append("ref", "api::building-expense.building-expense");
                        formDataReceipt.append("field", "receipt");

                        axios.post("https://api.resguru.app/api/upload", formData, {
                            headers: {
                                "Content-Type": "multipart/form-data",
                            },
                        }).then((result) => { console.log("Upload file", result) })
                            .catch((error) => {
                                console.log(error);
                            })
                    }
                    
                }
                )
                .catch(error => {
                    const errorMessage = error.message ? error.message : 'Error updating information';
                    this.$showNotification('danger', errorMessage); 
                })
                .finally(()=>{
                    this.$showNotification('#3A89CB', 'Expense is created Successfully')
                })
        },
        getIncome() {
            const loading = this.$vs.loading()
            fetch(`https://api.resguru.app/api/tenant-receipts?populate=*?populate=building&filters[building][id][$eq]=${this.$store.state.building}&sort[0]=id:desc`)
                .then(response => response.json())
                .then((resp) => {
                    console.log("Return from getReceipt()", resp.data);
                    this.income = resp.data
                }).finally(() => {
                    loading.close()
                })
        }
    }


}
</script>
<style>
.text-custom {
    font-family: 'Prompt';
}

#mr {
    width: 90px;
}

/* .vs-select__input{
    height: 36px !important;
    width: 350px !important;
} */
</style>