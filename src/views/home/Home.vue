<template>
    <div class="flex w-[100%]" id="home">
        <div class="bg-[#003765] w-[40%] rounded-r-[40px]">
            <div class="flex flex-col justify-between w-[100%] h-[100vh!important] ">
                <div class="pl-[50px] pt-[30px]">
                    <!-- <div class="text-[white] flex mt-[16px] cursor-pointer">
                        <div class="flex justify-center items-center mr-[8px]"><svg width="7" height="12" viewBox="0 0 7 12"
                                fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M0.338101 5.99962C0.338101 5.88552 0.357334 5.77495 0.3958 5.6679C0.434267 5.56085 0.500293 5.46053 0.593876 5.36695L5.10348 0.857324C5.24834 0.712458 5.42142 0.642591 5.6227 0.647724C5.82398 0.652841 5.99706 0.727841 6.14193 0.872724C6.28679 1.01759 6.35923 1.19322 6.35923 1.39962C6.35923 1.60602 6.28679 1.78166 6.14193 1.92652L2.06883 5.99962L6.1573 10.0881C6.30217 10.233 6.37204 10.406 6.36693 10.6073C6.36179 10.8086 6.28679 10.9817 6.14193 11.1265C5.99706 11.2714 5.82142 11.3438 5.615 11.3438C5.4086 11.3438 5.23297 11.2714 5.0881 11.1265L0.593876 6.6323C0.500293 6.53872 0.434267 6.44 0.3958 6.33615C0.357334 6.23232 0.338101 6.12014 0.338101 5.99962Z"
                                    fill="white" />
                            </svg></div>
                        <div class="flex justify-center items-center">ย้อนกลับ</div>
                    </div> -->
                </div>
                <div class="flex flex-col justify-center items-center">
                    <div>
                        <svg width="185" height="162" viewBox="0 0 185 162" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M15.7188 161.574L10.9638 154.719H5.71283V161.574H0V136.984H10.6731C17.2582 136.984 21.3804 140.394 21.3804 145.902C21.3804 149.586 19.516 152.297 16.3004 153.661L21.8251 161.574H15.7017H15.7188ZM10.3652 141.622H5.71283V150.2H10.3652C13.8545 150.2 15.6162 148.58 15.6162 145.919C15.6162 143.259 13.8545 141.639 10.3652 141.639V141.622Z"
                                fill="white" />
                            <path
                                d="M45 157.004V161.574H25.8945V136.984H44.5382V141.554H31.5732V146.891H43.033V151.325H31.5732V157.021H45V157.004Z"
                                fill="white" />
                            <path
                                d="M47.6187 159.152L49.5515 154.872C51.6382 156.39 54.7341 157.43 57.6931 157.43C61.0797 157.43 62.4481 156.305 62.4481 154.787C62.4481 150.183 48.0976 153.354 48.0976 144.214C48.0976 140.036 51.4842 136.558 58.497 136.558C61.5929 136.558 64.7743 137.291 67.0662 138.74L65.3045 143.055C63.0125 141.759 60.6521 141.128 58.4628 141.128C55.0761 141.128 53.7762 142.39 53.7762 143.941C53.7762 148.477 68.1096 145.34 68.1096 154.378C68.1096 158.487 64.6887 162 57.6418 162C53.7249 162 49.7909 160.841 47.6016 159.152H47.6187Z"
                                fill="white" />
                            <path
                                d="M98.6926 148.887H103.909V158.862C101.19 160.909 97.4611 161.983 93.9376 161.983C86.1894 161.983 80.4766 156.68 80.4766 149.262C80.4766 141.844 86.1894 136.541 94.0403 136.541C98.3676 136.541 101.977 138.024 104.371 140.787L100.711 144.163C98.915 142.27 96.8283 141.383 94.331 141.383C89.5418 141.383 86.2578 144.572 86.2578 149.245C86.2578 153.917 89.5418 157.106 94.2626 157.106C95.8191 157.106 97.2559 156.833 98.7097 156.049V148.853L98.6926 148.887Z"
                                fill="white" />
                            <path
                                d="M108.988 150.762V136.984H114.701V150.541C114.701 155.213 116.737 157.14 120.192 157.14C123.647 157.14 125.682 155.213 125.682 150.541V136.984H131.326V150.762C131.326 157.993 127.17 162 120.157 162C113.145 162 108.988 157.993 108.988 150.762Z"
                                fill="white" />
                            <path
                                d="M152.691 161.574L147.936 154.719H142.685V161.574H136.973V136.984H147.646C154.231 136.984 158.353 140.394 158.353 145.902C158.353 149.586 156.489 152.297 153.273 153.661L158.798 161.574H152.674H152.691ZM147.338 141.622H142.685V150.2H147.338C150.827 150.2 152.589 148.58 152.589 145.919C152.589 143.259 150.827 141.639 147.338 141.639V141.622Z"
                                fill="white" />
                            <path
                                d="M162.66 150.762V136.984H168.373V150.541C168.373 155.213 170.408 157.14 173.863 157.14C177.319 157.14 179.354 155.213 179.354 150.541V136.984H184.998V150.762C184.998 157.993 180.842 162 173.829 162C166.816 162 162.66 157.993 162.66 150.762Z"
                                fill="white" />
                            <path
                                d="M142.154 105.078L119.935 73.3092C132.815 67.7842 140.324 56.9216 140.324 42.1029C140.324 19.9345 123.75 6.24121 97.255 6.24121H83.8281C86.9753 10.5555 88.8397 15.8589 88.8397 21.5886C88.8397 22.697 88.7713 23.8054 88.6173 24.8797H95.9722C109.998 24.8797 117.079 31.2404 117.079 42.1029C117.079 52.9654 109.981 59.3261 95.9722 59.3261H86.5648V77.5553H98.3839L117.489 105.078L120.876 109.972H145.54L142.12 105.078H142.154Z"
                                fill="white" />
                            <path
                                d="M82.7338 21.5886C82.7338 9.66884 73.0357 0 61.0798 0C49.1239 0 39.4258 9.66884 39.4258 21.5886C39.4258 30.8141 45.2583 38.6754 53.4342 41.7619V109.955H80.459V91.7431H68.7083V77.5383H80.459V59.3261H68.7083V41.7619C76.8842 38.6754 82.7167 30.8312 82.7167 21.5886H82.7338ZM61.0798 19.9516C57.8813 19.9516 55.2986 17.3766 55.2986 14.1878C55.2986 10.9989 57.8813 8.424 61.0798 8.424C64.2783 8.424 66.8611 10.9989 66.8611 14.1878C66.8611 17.3766 64.2783 19.9516 61.0798 19.9516Z"
                                fill="#F4D55E" />
                        </svg>
                    </div>
                    <div
                        class="text-[white] text-[32px]  w-[100%] text-center mt-[60px] flex flex-col justify-center items-center">
                        สำหรับเจ้าของห้องพัก</div>
                </div>
                <div class="ml-[-20px]">
                    <svg width="307" height="323" viewBox="0 0 307 323" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g opacity="0.1">
                            <path
                                d="M293.028 461.511L202.349 322C254.923 297.766 285.545 250.035 285.545 184.899C285.545 87.4955 217.941 27.3799 109.862 27.3799H55.1055C67.9527 46.325 75.5612 69.6215 75.5612 94.7924C75.5612 99.6793 75.2494 104.499 74.6881 109.252H104.686C161.875 109.252 190.812 137.168 190.812 184.899C190.812 232.63 161.875 260.545 104.686 260.545H66.3312V340.61H114.539L192.496 461.511L206.341 483H306.998L293.028 461.511Z"
                                fill="white" />
                            <path
                                d="M50.618 94.7925C50.618 42.4424 11.0785 0 -37.691 0C-86.4605 0 -126 42.4424 -126 94.7925C-126 135.36 -102.239 169.837 -68.8736 183.426V483H41.3879V403.002H-6.50848V340.61H41.3879V260.612H-6.50848V183.493C26.8569 169.97 50.618 135.427 50.618 94.8595V94.7925ZM-37.691 87.6295C-50.7253 87.6295 -61.265 76.316 -61.265 62.3247C-61.265 48.3335 -50.7253 37.02 -37.691 37.02C-24.6567 37.02 -14.117 48.3335 -14.117 62.3247C-14.117 76.316 -24.6567 87.6295 -37.691 87.6295Z"
                                fill="white" />
                        </g>
                    </svg>
                </div>
            </div>
        </div>
        <div class="w-[55%] pt-[50px]">
            <div class="text-center text-[24px] font-bold">เลือกห้องพักของคุณ</div>
            <div class="flex flex-col justify-between">
                <div class=" text-[18px]  mt-[50px] grid grid-cols-2 gap-5">

                    <div></div>
                </div>
            </div>
            <div class="flex flex-col justify-center items-center">
                <div class="grid grid-cols-2 gap-5 mt-[10px] ">
                    <div class="w-[360px] text-[18px]  rounded-[16px] flex cursor-pointer">
                        <div>รายการหอพัก</div>
                    </div>
                </div>
            </div>
            <div class="flex flex-col justify-center items-center mt-[10px]">
                <div class="grid grid-cols-2 gap-5 mt-[10px]">
                    <div class="w-[360px] border border-[#B9CCDC]  rounded-[16px] flex cursor-pointer"
                        v-for="data in building">
                        
                        <div class="w-[30%]  h-[100%] rounded-[16px] flex flex-col items-center justify-center"  @click="routeToMain(data.id)"
                            :style="{ background: data.attributes.colorCode }" v-if="data.attributes.buildingLogo?.data">
                            <img :src="'https://api.resguru.app' + data.attributes.buildingLogo?.data?.attributes.url"
                                class="w-[90px] h-[90px] rounded-[22px]" />
                            <div class="text-[12px] mt-[4px]"
                                :class="data.attributes.colorCode == '#ffffff' ? '' : 'text-[white]'">Professional</div>
                        </div>
                       
                     
                        <div v-else class="w-[30%]  h-[100%] rounded-[16px] flex flex-col items-center justify-center"  @click="routeToMain(data.id)"
                            :style="{ background: data.attributes.colorCode }">
                            <img src="../../assets/img/Logo-01.png"
                                class="w-[90px] h-[90px] rounded-[0px]" />
                            <div class="text-[12px] mt-[4px]"
                                :class="data.attributes.colorCode == '#ffffff' ? '' : 'text-[white]'">Professional</div>
                        </div>
                      

                        <div class="w-[70%] p-[8px] flex flex-col">
                            <div  @click="routeToMain(data.id)">
                                <div class="flex justify-between">
                                    <div class="text-[14px] font-bold">{{ data.attributes.buildingName }}</div>
                                    <div class="flex justify-center items-center cursor-pointer"><svg width="4" height="12"
                                            viewBox="0 0 4 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <ellipse cx="2.0013" cy="2.16667" rx="1.66667" ry="1.66667"
                                                transform="rotate(90 2.0013 2.16667)" fill="#5C6B79" />
                                            <circle cx="2.0013" cy="7.99967" r="1.66667"
                                                transform="rotate(90 2.0013 7.99967)" fill="#5C6B79" />
                                            <ellipse cx="2.0013" cy="13.8337" rx="1.66667" ry="1.66667"
                                                transform="rotate(90 2.0013 13.8337)" fill="#5C6B79" />
                                        </svg>
                                    </div>
                                </div>
                                <div
                                    class="w-[100%] rounded-[16px] border border-[#B9CCDC] flex justify-between pl-[8px] pr-[8px] mt-[8px]">
                                    <div class="text-[12px]">สร้างเมื่อวันที่</div>
                                    <div class="text-[12px]">{{ covertDate(data.attributes.createdAt) }}</div>
                                </div>
                                <div
                                    class="w-[100%] rounded-[16px] border border-[#B9CCDC]  flex justify-between pl-[8px] pr-[8px] mt-[8px]">
                                    <div class="text-[12px]">จำนวน ชั้น/ห้อง</div>
                                    <div class="text-[12px]">2/12</div>
                                </div>
                            </div>
                            <div>
                                <div class="color"> <button
                                        class="w-[100%] h-[28px] mt-[14px] flex justify-center items-center rounded-[16px] border border-[#B9CCDC] "
                                        :style="{ background: data.attributes.colorCode }">
                                        <div class="flex justify-center items-center mr-[4px]"><svg width="16" height="17"
                                                viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path
                                                    d="M1.09025 16.2914C0.854023 16.2914 0.656878 16.2124 0.498814 16.0543C0.340751 15.8962 0.261719 15.6991 0.261719 15.4629V12.935C0.261719 12.8246 0.281702 12.7194 0.321669 12.6195C0.36162 12.5196 0.424488 12.4267 0.510273 12.341L8.32486 4.52638L7.32003 3.53919C7.17782 3.40287 7.10907 3.24099 7.11378 3.05354C7.11849 2.8661 7.19193 2.70128 7.33412 2.55907C7.47045 2.42276 7.63233 2.35461 7.81977 2.35461C8.00722 2.35461 8.17203 2.42276 8.31422 2.55907L9.7351 3.97642L12.7037 1.00782C12.8424 0.869142 13.0181 0.799805 13.2308 0.799805C13.4435 0.799805 13.6192 0.869142 13.7578 1.00782L15.5171 2.76706C15.6558 2.90574 15.7251 3.08143 15.7251 3.29415C15.7251 3.50686 15.6558 3.68255 15.5171 3.82123L12.5309 6.80745L13.994 8.27061C14.1304 8.40694 14.2 8.56647 14.2029 8.74921C14.2059 8.93194 14.1362 9.09442 13.994 9.23662C13.8518 9.37881 13.6885 9.44991 13.504 9.44991C13.3195 9.44991 13.1561 9.37881 13.0139 9.23662L12.0091 8.24589L4.21216 16.0428C4.12636 16.1286 4.03352 16.1915 3.93363 16.2315C3.83375 16.2714 3.72857 16.2914 3.61809 16.2914H1.09025ZM1.6367 14.9164H3.4242L11.0325 7.26226L9.29086 5.52059L1.6367 13.1289V14.9164ZM11.5543 5.83792L14.0981 3.29415L13.2308 2.42684L10.687 4.97061L11.5543 5.83792Z"
                                                    :fill="data.attributes.colorCode == '#ffffff' ? '#003765' : '#ffffff'" />
                                            </svg>
                                        </div><span
                                            :class="data.attributes.colorCode == '#ffffff' ? 'text-[#003765]' : 'text-[#ffffff]'">เปลี่ยนธีมสี</span>
                                    </button>
                                    <input @change="updateBuildingColor(data.id,data.attributes.colorCode)" type="color" v-model="data.attributes.colorCode" class="custom-picker" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="w-[360px] border border-[#B9CCDC]  rounded-[16px]  flex">
                        <div class="w-[30%] bg-[#c9edee] h-[100%] rounded-[16px] flex flex-col items-center justify-center">
                            <div class="w-[90px] h-[90px] rounded-[22px] bg-slate-300"></div>
                            <div class="text-[12px] mt-[4px]">Professional</div>
                        </div>
                        <div class="w-[70%] p-[8px] flex flex-col">
                            <div class="flex justify-between">
                                <div class="text-[14px] font-bold">Avenue Apartments</div>
                                <div class="flex justify-center items-center cursor-pointer"><svg width="4" height="12"
                                        viewBox="0 0 4 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <ellipse cx="2.0013" cy="2.16667" rx="1.66667" ry="1.66667"
                                            transform="rotate(90 2.0013 2.16667)" fill="#5C6B79" />
                                        <circle cx="2.0013" cy="7.99967" r="1.66667" transform="rotate(90 2.0013 7.99967)"
                                            fill="#5C6B79" />
                                        <ellipse cx="2.0013" cy="13.8337" rx="1.66667" ry="1.66667"
                                            transform="rotate(90 2.0013 13.8337)" fill="#5C6B79" />
                                    </svg>
                                </div>
                            </div>
                            <div
                                class="w-[100%] rounded-[16px] border border-indigo-600 flex justify-between pl-[8px] pr-[8px] mt-[8px]">
                                <div class="text-[12px]">สร้างเมื่อวันที่</div>
                                <div class="text-[12px]">12/02/2022</div>
                            </div>
                            <div
                                class="w-[100%] rounded-[16px] border border-[#B9CCDC]  flex justify-between pl-[8px] pr-[8px] mt-[8px]">
                                <div class="text-[12px]">จำนวน ชั้น/ห้อง</div>
                                <div class="text-[12px]">2/12</div>
                            </div>
                            <div>
                                <button
                                    class="w-[100%] h-[28px] mt-[14px] flex justify-center items-center rounded-[16px] border border-[#B9CCDC] bg-[#c9edee]">
                                    <div class="flex justify-center items-center mr-[4px]"><svg width="16" height="17"
                                            viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M1.09025 16.2914C0.854023 16.2914 0.656878 16.2124 0.498814 16.0543C0.340751 15.8962 0.261719 15.6991 0.261719 15.4629V12.935C0.261719 12.8246 0.281702 12.7194 0.321669 12.6195C0.36162 12.5196 0.424488 12.4267 0.510273 12.341L8.32486 4.52638L7.32003 3.53919C7.17782 3.40287 7.10907 3.24099 7.11378 3.05354C7.11849 2.8661 7.19193 2.70128 7.33412 2.55907C7.47045 2.42276 7.63233 2.35461 7.81977 2.35461C8.00722 2.35461 8.17203 2.42276 8.31422 2.55907L9.7351 3.97642L12.7037 1.00782C12.8424 0.869142 13.0181 0.799805 13.2308 0.799805C13.4435 0.799805 13.6192 0.869142 13.7578 1.00782L15.5171 2.76706C15.6558 2.90574 15.7251 3.08143 15.7251 3.29415C15.7251 3.50686 15.6558 3.68255 15.5171 3.82123L12.5309 6.80745L13.994 8.27061C14.1304 8.40694 14.2 8.56647 14.2029 8.74921C14.2059 8.93194 14.1362 9.09442 13.994 9.23662C13.8518 9.37881 13.6885 9.44991 13.504 9.44991C13.3195 9.44991 13.1561 9.37881 13.0139 9.23662L12.0091 8.24589L4.21216 16.0428C4.12636 16.1286 4.03352 16.1915 3.93363 16.2315C3.83375 16.2714 3.72857 16.2914 3.61809 16.2914H1.09025ZM1.6367 14.9164H3.4242L11.0325 7.26226L9.29086 5.52059L1.6367 13.1289V14.9164ZM11.5543 5.83792L14.0981 3.29415L13.2308 2.42684L10.687 4.97061L11.5543 5.83792Z"
                                                fill="#003765" />
                                        </svg>
                                    </div>เปลี่ยนธีมสี

                                </button>
                                <input type="color" hidden /> <label>assds</label>
                            </div>
                        </div>
                    </div> -->
                    <div @click="routeTo()"
                        class="w-[360px] border border-[#B9CCDC] rounded-[16px] h-[147px] flex justify-center items-center cursor-pointer">
                        <div>
                            <div class="flex justify-center items-center">
                                <svg width="55" height="55" viewBox="0 0 55 55" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="27.5" cy="27.5" r="27.5" fill="#F3F7FA" />
                                    <mask id="mask0_967_26014" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="5"
                                        y="5" width="45" height="45">
                                        <rect x="5.5" y="5.49902" width="44" height="44" fill="#D9D9D9" />
                                    </mask>
                                    <g mask="url(#mask0_967_26014)">
                                        <path
                                            d="M27.4994 39.8739C27.1096 39.8739 26.7831 39.7422 26.5199 39.4787C26.2566 39.2151 26.125 38.8886 26.125 38.499V28.8739H16.5C16.1104 28.8739 15.7838 28.7421 15.5203 28.4785C15.2568 28.2148 15.125 27.8881 15.125 27.4984C15.125 27.1086 15.2568 26.7821 15.5203 26.5189C15.7838 26.2556 16.1104 26.124 16.5 26.124H26.125V16.499C26.125 16.1094 26.2568 15.7828 26.5204 15.5193C26.7841 15.2558 27.1108 15.124 27.5005 15.124C27.8903 15.124 28.2168 15.2558 28.4801 15.5193C28.7433 15.7828 28.8749 16.1094 28.8749 16.499V26.124H38.5C38.8895 26.124 39.2161 26.2558 39.4796 26.5195C39.7432 26.7831 39.8749 27.1098 39.8749 27.4996C39.8749 27.8893 39.7432 28.2158 39.4796 28.4791C39.2161 28.7423 38.8895 28.8739 38.5 28.8739H28.8749V38.499C28.8749 38.8886 28.7431 39.2151 28.4795 39.4787C28.2158 39.7422 27.8891 39.8739 27.4994 39.8739Z"
                                            fill="#B9CCDC" />
                                    </g>
                                </svg>
                            </div>
                            <div class="mt-[4px]">สร้างห้องพัก</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>
<script>
import Logo01 from '@/assets/img/Logo-01.png'
import axios from 'axios'
import router from '@/router'
export default {
    data() {
        return {
            Logo01,
            building: [],
            color: '',
        }
    },
    mounted() {
        this.$store.state.main = false
        this.getBuilding()
    },
    methods: {
        routeTo() {
            router.push({
                path: '/create_building',
            })
        },
        routeToMain(buidingId) {
            this.$store.commit('setMain', true);
            this.$store.commit('setBuilding', buidingId);
            router.push({
                path: '/dashboard',
            })
            this.$store.state.main = true
        },
        covertDate(createDate) {
            var date = new Date(createDate);

            // Extract the day, month, and year components
            var day = date.getUTCDate();
            var month = date.getUTCMonth() + 1; // Months are zero-based, so add 1 to get the correct month.
            var year = date.getUTCFullYear();

            // Format the components as "dd/mm/yyyy"
            var formattedDate = day + '/' + month + '/' + year;
            return formattedDate
        },
        updateBuildingColor(buildingid,color){
             // console.log("test v model", this.buildingName)
             axios.put(`https://api.resguru.app/api/buildings/${buildingid}`,{
                data : {
                    colorCode: color, 
                }
            })
               
        },
        getBuilding() {
            const loading = this.$vs.loading()
            fetch('https://api.resguru.app/api' + '/buildings?filters[user_owner][id][$eq]='+this.$store.state.userInfo.user.id+'&populate=*')
                .then(response => response.json())
                .then((resp) => {
                    console.log(resp.data);
                    this.building = resp.data
                }).finally(() => {
                    loading.close()
                })
        }
    },
}
</script>
<style>
#home {
    background-color: white;
}

.color {
    position: relative;
    width: 100%;
    text-align: center;
    line-height: 100px;
}

.custom-picker {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    opacity: 0;
    cursor: pointer;
}
</style>